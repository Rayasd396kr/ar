<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script>
      const showInfo = () => {
        const profileButton = document.querySelector("#profile-button");
        const webButton = document.querySelector("#web-button");
        const emailButton = document.querySelector("#email-button");
        const locationButton = document.querySelector("#location-button");

        profileButton.addEventListener('click', function (evt) {
          window.location.href="https://www.nutc.edu.tw/";
        });
        webButton.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/";
        });
        emailButton.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/p/412-1015-2083.php?Lang=zh-tw";
        });
        locationButton.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/p/412-1015-1670.php?Lang=zh-tw";
        });
      }
      AFRAME.registerComponent('mytarget', {
        init: function () {
          this.el.addEventListener('targetFound', event => {
            console.log("target found");
            showInfo();
          });
          this.el.addEventListener('targetLost', event => {
            console.log("target found");
          });
        }
      });

      // 2
      const showInfo1 = () => {
        const profileButton1 = document.querySelector("#profile-button1");
        const webButton1 = document.querySelector("#web-button1");
        const emailButton1 = document.querySelector("#email-button1");
        const locationButton1 = document.querySelector("#location-button1");

        profileButton1.addEventListener('click', function (evt) {
          window.location.href="https://www.nutc.edu.tw/";
        });
        webButton1.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/";
        });
        emailButton1.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/p/412-1015-2083.php?Lang=zh-tw";
        });
        locationButton1.addEventListener('click', function (evt) {
          window.location.href="https://aca.nutc.edu.tw/p/412-1015-1670.php?Lang=zh-tw";
        });
      }
      AFRAME.registerComponent('mytarget1', {
        init: function () {
          this.el.addEventListener('targetFound', event => {
            console.log("target found");
            showInfo1();   
          });
          this.el.addEventListener('targetLost', event => {
            console.log("target found");
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene mindar-image="imageTargetSrc: https://raw.githubusercontent.com/Rayasd396kr/ar/main/t1.mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
        <a-asset-item id="bearModel" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/asset.gltf"></a-asset-item>
        <a-asset-item id="raccoonModel" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/band-example/raccoon/scene.gltf"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;" raycaster="far: ${customFields.libVersion}; objects: .clickable"></a-camera>

      <a-entity id="mytarget" mytarget="" mindar-image-target="targetIndex: 0">
        <a-gltf-model rotation="0 0 0 " position="0 -0.25 0" scale="0.5 0.5 0.5" src="#bearModel" animation-mixer></a-gltf-model>

        <a-image visible="true" id="profile-button" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="-0.42 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="web-button" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" alpha-test="0.5" position="-0.14 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="email-button" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="0.14 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="location-button" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="0.42 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-text id="text" class="clickable" value="資訊樓" font="custom-msdf.json" color="black" negate="false" align="center" width="2" position="0 0.2 0" geometry="primitive:plane; height: 0.1; width: 0.5;" material="opacity: 0.5" text=""></a-text>
      </a-entity>


      <!-- 2 -->
      <a-entity id="mytarget1" mytarget1="" mindar-image-target="targetIndex: 1">
        <a-gltf-model rotation="0 0 0 " position="0 -0.25 0" scale="0.05 0.05 0.05" src="#raccoonModel" animation-mixer></a-gltf-model>
        
        <a-image visible="true" id="profile-button1" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="-0.42 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="web-button1" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" alpha-test="0.5" position="-0.14 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="email-button1" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="0.14 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-image visible="true" id="location-button1" class="clickable" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png" position="0.42 -0.5 0" height="0.15" width="0.15" animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate" material="" geometry=""></a-image>

        <a-text id="text" class="clickable" value="弘業樓" font="custom1-msdf.json" color="black" negate="false" align="center" width="2" position="0 0.3 0" geometry="primitive:plane; height: 0.1; width: 0.5;" material="opacity: 0.5" text=""></a-text>

      </a-entity>

    </a-scene>
    
    <script>
      window.addEventListener('pageshow', function(event) {
          // 如果是從頁面緩存返回，重新加載頁面
          if (event.persisted) {
              window.location.reload(); 
          }
      });
    </script>
  </body>
</html>
